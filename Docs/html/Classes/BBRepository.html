<!DOCTYPE HTML>
<html>
	<head>
		<meta http-equiv="Content-Type" content="html/html; charset=utf-8" />
		<title>BBRepository Class Reference</title>
		<meta id="xcode-display" name="xcode-display" content="render"/>
		<meta name="viewport" content="width=550" />
		<link rel="stylesheet" type="text/css" href="../css/styles.css" media="all" />
		<link rel="stylesheet" type="text/css" media="print" href="../css/stylesPrint.css" />
		<meta name="generator" content="appledoc 2.0.5 (build 737)" />
	</head>
	<body>
		<header id="top_header">
			<div id="library" class="hideInXcode">
				<h1><a id="libraryTitle" href="../index.html">BBRepository </a></h1>
				<a id="developerHome" href="../index.html">BiasedBit</a>
			</div>
			
			<div id="title" role="banner">
				<h1 class="hideInXcode">BBRepository Class Reference</h1>
			</div>
			<ul id="headerButtons" role="toolbar">
				<li id="toc_button">
					<button aria-label="Show Table of Contents" role="checkbox" class="open" id="table_of_contents"><span class="disclosure"></span>Table of Contents</button>
				</li>
				<li id="jumpto_button" role="navigation">
					<select id="jumpTo">
	<option value="top">Jump To&#133;</option>
	
	<option value="overview">Overview</option>
	
	
	
	
	<option value="tasks">Tasks</option>
	
	
	
	
	
	<option value="properties">Properties</option>
	
	<option value="//api/name/identifier">&nbsp;&nbsp;&nbsp;&nbsp;identifier</option>
	
	
	
	
	
	
	<option value="instance_methods">Instance Methods</option>
	
	<option value="//api/name/addItem:">&nbsp;&nbsp;&nbsp;&nbsp;- addItem:</option>
	
	<option value="//api/name/allItems">&nbsp;&nbsp;&nbsp;&nbsp;- allItems</option>
	
	<option value="//api/name/baseStoragePath">&nbsp;&nbsp;&nbsp;&nbsp;- baseStoragePath</option>
	
	<option value="//api/name/convertItemToDictionary:">&nbsp;&nbsp;&nbsp;&nbsp;- convertItemToDictionary:</option>
	
	<option value="//api/name/createItemFromDictionary:">&nbsp;&nbsp;&nbsp;&nbsp;- createItemFromDictionary:</option>
	
	<option value="//api/name/destroy">&nbsp;&nbsp;&nbsp;&nbsp;- destroy</option>
	
	<option value="//api/name/flush">&nbsp;&nbsp;&nbsp;&nbsp;- flush</option>
	
	<option value="//api/name/hasItemWithKey:">&nbsp;&nbsp;&nbsp;&nbsp;- hasItemWithKey:</option>
	
	<option value="//api/name/init">&nbsp;&nbsp;&nbsp;&nbsp;- init</option>
	
	<option value="//api/name/initWithIdentifier:">&nbsp;&nbsp;&nbsp;&nbsp;- initWithIdentifier:</option>
	
	<option value="//api/name/itemCount">&nbsp;&nbsp;&nbsp;&nbsp;- itemCount</option>
	
	<option value="//api/name/itemForKey:">&nbsp;&nbsp;&nbsp;&nbsp;- itemForKey:</option>
	
	<option value="//api/name/reload">&nbsp;&nbsp;&nbsp;&nbsp;- reload</option>
	
	<option value="//api/name/reloadComplete">&nbsp;&nbsp;&nbsp;&nbsp;- reloadComplete</option>
	
	<option value="//api/name/removeItemWithKey:">&nbsp;&nbsp;&nbsp;&nbsp;- removeItemWithKey:</option>
	
	<option value="//api/name/repositoryName">&nbsp;&nbsp;&nbsp;&nbsp;- repositoryName</option>
	
	
	
</select>
				</li>
			</ul>
		</header>
		<nav id="tocContainer" class="isShowingTOC">
			<ul id="toc" role="tree">
				
<li role="treeitem"><span class="nodisclosure"></span><span class="sectionName"><a href="#overview">Overview</a></span></li>




<li role="treeitem" id="task_treeitem"><span class="nodisclosure"></span><span class="sectionName"><a href="#tasks">Tasks</a></span><ul>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#task_Creation">Creation</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#task_Repository properties">Repository properties</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#task_Repository lifecycle management">Repository lifecycle management</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#task_Querying">Querying</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#task_Modifications">Modifications</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#task_Item (de-)serialization">Item (de-)serialization</a></span></li>
	
</ul></li>





<li role="treeitem" class="children"><span class="disclosure"></span><span class="sectionName"><a href="#properties">Properties</a></span><ul>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/identifier">identifier</a></span></li>
	
</ul></li>





<li role="treeitem" class="children"><span class="disclosure"></span><span class="sectionName"><a href="#instance_methods">Instance Methods</a></span><ul>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/addItem:">addItem:</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/allItems">allItems</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/baseStoragePath">baseStoragePath</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/convertItemToDictionary:">convertItemToDictionary:</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/createItemFromDictionary:">createItemFromDictionary:</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/destroy">destroy</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/flush">flush</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/hasItemWithKey:">hasItemWithKey:</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/init">init</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/initWithIdentifier:">initWithIdentifier:</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/itemCount">itemCount</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/itemForKey:">itemForKey:</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/reload">reload</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/reloadComplete">reloadComplete</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/removeItemWithKey:">removeItemWithKey:</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/repositoryName">repositoryName</a></span></li>
	
</ul></li>


			</ul>
		</nav>
		<article>
			<div id="contents" class="isShowingTOC" role="main">
				<a title="BBRepository Class Reference" name="top"></a>
				<div class="main-navigation navigation-top">
					<ul>
	<li><a href="../index.html">Index</a></li>
	<li><a href="../hierarchy.html">Hierarchy</a></li>
</ul>
				</div>
				<div id="header">
					<div class="section-header">
						<h1 class="title title-header">BBRepository Class Reference</h1>
					</div>		
				</div>
				<div id="container">	
					
					<div class="section section-specification"><table cellspacing="0"><tbody>
						<tr>
	<td class="specification-title">Inherits from</td>
	<td class="specification-value">NSObject</td>
</tr><tr>
	<td class="specification-title">Declared in</td>
	<td class="specification-value">BBRepository.h</td>
</tr>
						</tbody></table></div>
					
					
					
					
					<div class="section section-overview">
						<a title="Overview" name="overview"></a>
						<h2 class="subtitle subtitle-overview">Overview</h2>
						<p>Blueprint for a simple object repository that stores objects to disk using binary property lists.</p>

<p>You can read all about the perks of this method <a href="http://biasedbit.com/caf-vs-custom-serialization/">in this article</a>.</p>

<p>This is a (way) faster alternative to Core Data for those cases where you don&rsquo;t need all the querying power of Core
Data and are more interested in the raw speed of operations.</p>

<p>By default, a repository only permits querying by its primary key, <a href="../Protocols/BBRepositoryItem.html#//api/name/key"><code>[BBRepositoryItem key]</code></a> but you are free
(and welcome) to extend it to support indexing/searching/removing by other attributes.</p>

<h2>Reading and persisting data</h2>

<p>Unlike Core Data, this repository does not automatically load and/or persist content. It is up to you to
determine the most appropriate time to load contents from disk (<a href="#//api/name/reload"><code>reload</code></a>) and/or persist them (<a href="#//api/name/flush"><code>flush</code></a>).</p>

<p>If the repository will be used throughout the app, you should probably do a call to <a href="#//api/name/reload"><code>reload</code></a> when the app finishes
launching and perform a <a href="#//api/name/flush"><code>flush</code></a> when it&rsquo;s sent to background or terminated.</p>

<h2>Repository location and identification</h2>

<p>This class will store the index file, a binary property list, in the <code>NSApplicationSupportDirectory</code>. The index file
will contain <code>NSDictionary</code> representations of the managed objects</p>

<h2>Subclassing notes</h2>

<p>Assuming the items that are to be managed by this repository contain back and forth conversion logic in them
(i.e. they properly implement <a href="../Protocols/BBRepositoryItem.html#//api/name/initWithRepositoryDictionary:"><code>[BBRepositoryItem initWithRepositoryDictionary:]</code></a> and
<a href="../Protocols/BBRepositoryItem.html#//api/name/convertToRepositoryDictionary"><code>[BBRepositoryItem convertToRepositoryDictionary]</code></a>) the only method you need to override is
<a href="#//api/name/createItemFromDictionary:"><code>createItemFromDictionary:</code></a>.</p>

<p>All other methods are optional, but you will likely need to add further logic (i.e. override calling <code>super</code>). For an
example, check out the <a href="../Classes/BBCache.html">BBCache</a> class and other examples provided.</p>

<h2>Performance considerations</h2>

<p>This class (and subclasses) are not meant to handle very large data sets. Use it only if you&rsquo;re sure that you will be
handling at most a couple thousand entries.</p>

<h3>Properties of managed objects</h3>

<p>Whatever the properties of your objects are, they will inevitably be converted to basic foundation types:</p>

<ul>
<li><code>NSString</code></li>
<li><code>NSNumber</code></li>
<li><code>NSArray</code></li>
<li><code>NSDictionary</code></li>
</ul>


<p>As long as your objects can be converted into these primitives, they can be as complex as you&rsquo;d like them to be.</p>

<h3>Circular references</h3>

<p>Circular references are <strong>not</strong> supported. If you really need to store an object graph, please use the <code>NSCoding</code>
protocol instead. While it is slightly slower, it&rsquo;s a richer serialization framework.</p>

<h3>Size of managed objects</h3>

<p>Since all the entries in the index file will be loaded to memory, you should strive to keep your managed objects as
small and simple as possible.</p>

<p>You should never store binary data or very large fields in these objects. What you should do instead is subclass this
class and make sure the very large fields are stored to their own files and lazily loaded whenever needed. A good
point to write these files to disk would be when adding objects to the repository (i.e. override <a href="#//api/name/addItem:"><code>addItem:</code></a> and roll in
the added functionality).</p>

<p>Assuming you want to store an object that holds a <code>UIImage</code> instance, instead of storing the <code>NSData</code> for the PNG
representation of the image in the managed object, you could instead hold the path for a file where that <code>NSData</code> is
stored and lazily load it whenever appropriate. When adding this object to the repository, you&rsquo;d immediately save the
image data to disk and when removing it from the repository, you&rsquo;d delete its companion file.</p>

<p>An image cache is a perfect example of this use case.</p>
					</div>
					
					
					
					
					
					<div class="section section-tasks">
						<a title="Tasks" name="tasks"></a>
						<h2 class="subtitle subtitle-tasks">Tasks</h2>
						
						
						<a title="Creation" name="task_Creation"></a>
						<h3 class="subsubtitle task-title">Creation</h3>

						<ul class="task-list">
							<li>
	<span class="tooltip">
		<code><a href="#//api/name/initWithIdentifier:">&ndash;&nbsp;initWithIdentifier:</a></code>
		<span class="tooltip"><p>Creates a new repository with a given <a href="#//api/name/identifier">identifier</a>.</p></span>
	</span>
	
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/init">&ndash;&nbsp;init</a></code>
		<span class="tooltip"><p>Creates a new repository, passing &ldquo;Default&rdquo; as the <a href="#//api/name/identifier">identifier</a>.</p></span>
	</span>
	
	
</li>
						</ul>
						
						
						<a title="Repository properties" name="task_Repository properties"></a>
						<h3 class="subsubtitle task-title">Repository properties</h3>

						<ul class="task-list">
							<li>
	<span class="tooltip">
		<code><a href="#//api/name/identifier">&nbsp;&nbsp;identifier</a></code>
		<span class="tooltip"><p>The <a href="#//api/name/identifier">identifier</a> for this repository, as provided on creation.</p></span>
	</span>
	<span class="task-item-suffix">property</span>
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/baseStoragePath">&ndash;&nbsp;baseStoragePath</a></code>
		<span class="tooltip"><p>Returns the base storage path.</p></span>
	</span>
	
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/repositoryName">&ndash;&nbsp;repositoryName</a></code>
		<span class="tooltip"><p>Name of the repository, used to generate the target repository directory and index filename.</p></span>
	</span>
	
	
</li>
						</ul>
						
						
						<a title="Repository lifecycle management" name="task_Repository lifecycle management"></a>
						<h3 class="subsubtitle task-title">Repository lifecycle management</h3>

						<ul class="task-list">
							<li>
	<span class="tooltip">
		<code><a href="#//api/name/destroy">&ndash;&nbsp;destroy</a></code>
		<span class="tooltip"><p>Completely purges all data managed by this repository.</p></span>
	</span>
	
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/reload">&ndash;&nbsp;reload</a></code>
		<span class="tooltip"><p>Reload data from disk</p></span>
	</span>
	
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/reloadComplete">&ndash;&nbsp;reloadComplete</a></code>
		<span class="tooltip"><p>Called after <a href="#//api/name/reload">reload</a> succeeds, right before returning <code>YES</code> on <a href="#//api/name/reload"><code>reload</code></a>.</p></span>
	</span>
	
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/flush">&ndash;&nbsp;flush</a></code>
		<span class="tooltip"><p>Serialize and <a href="#//api/name/flush">flush</a> all entries in memory to disk.</p></span>
	</span>
	
	
</li>
						</ul>
						
						
						<a title="Querying" name="task_Querying"></a>
						<h3 class="subsubtitle task-title">Querying</h3>

						<ul class="task-list">
							<li>
	<span class="tooltip">
		<code><a href="#//api/name/itemCount">&ndash;&nbsp;itemCount</a></code>
		<span class="tooltip"><p>Number of managed entries (in-memory) by this repository.</p></span>
	</span>
	
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/allItems">&ndash;&nbsp;allItems</a></code>
		<span class="tooltip"><p>Returns a snapshot of all the items present in the repository at the time of calling of this method.</p></span>
	</span>
	
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/hasItemWithKey:">&ndash;&nbsp;hasItemWithKey:</a></code>
		<span class="tooltip"><p>Test whether the repository contains an item with the given key.</p></span>
	</span>
	
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/itemForKey:">&ndash;&nbsp;itemForKey:</a></code>
		<span class="tooltip"><p>Retrieve an item based on its index key</p></span>
	</span>
	
	
</li>
						</ul>
						
						
						<a title="Modifications" name="task_Modifications"></a>
						<h3 class="subsubtitle task-title">Modifications</h3>

						<ul class="task-list">
							<li>
	<span class="tooltip">
		<code><a href="#//api/name/addItem:">&ndash;&nbsp;addItem:</a></code>
		<span class="tooltip"><p>Adds an item to the repository.</p></span>
	</span>
	
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/removeItemWithKey:">&ndash;&nbsp;removeItemWithKey:</a></code>
		<span class="tooltip"><p>Removes an item from the repository.</p></span>
	</span>
	
	
</li>
						</ul>
						
						
						<a title="Item (de-)serialization" name="task_Item (de-)serialization"></a>
						<h3 class="subsubtitle task-title">Item (de-)serialization</h3>

						<ul class="task-list">
							<li>
	<span class="tooltip">
		<code><a href="#//api/name/createItemFromDictionary:">&ndash;&nbsp;createItemFromDictionary:</a></code>
		<span class="tooltip"><p>Creates an instance of a class that implements the <a href="../Protocols/BBRepositoryItem.html"><code>BBRepositoryItem</code></a> protocol from an <code>NSDictionary</code> containing the
serialized version of the object.</p></span>
	</span>
	
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/convertItemToDictionary:">&ndash;&nbsp;convertItemToDictionary:</a></code>
		<span class="tooltip"><p>Convert an item to its <code>NSDictionary</code> representation, so that it can be stored to a binary property list (plist).</p></span>
	</span>
	
	
</li>
						</ul>
						
					</div>
					
					
					
					
					
					<div class="section section-methods">
						<a title="Properties" name="properties"></a>
						<h2 class="subtitle subtitle-methods">Properties</h2>
						
						<div class="section-method">
	<a name="//api/name/identifier" title="identifier"></a>
	<h3 class="subsubtitle method-title">identifier</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>The <a href="#//api/name/identifier">identifier</a> for this repository, as provided on creation.</p>
	</div>		
	
	
	<div class="method-subsection method-declaration"><code>@property (strong, nonatomic, readonly) NSString *identifier</code></div>
	
	
	
	
	
	
	
	
	<div class="method-subsection discussion-section">
		<h4 class="method-subtitle">Discussion</h4>
		<p>Identifiers serve to distinguish among different versions of the same repository. Two repositories with two different
identifiers will have a different storage path and index, thus resulting in two completely independent repositories.</p>
	</div>
	
	
	
	
	
	<div class="method-subsection see-also-section">
		<h4 class="method-subtitle">See Also</h4>
		<ul>
			
			<li><code><p><a href="#//api/name/baseStoragePath">&ndash; baseStoragePath</a></p></code></li>
			
			<li><code><p><a href="#//api/name/repositoryName">&ndash; repositoryName</a></p></code></li>
			
		</ul>
	</div>
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">BBRepository.h</code><br />
	</div>				
	
	
</div>
						
					</div>
					
					
					
					
					
					<div class="section section-methods">
						<a title="Instance Methods" name="instance_methods"></a>
						<h2 class="subtitle subtitle-methods">Instance Methods</h2>
						
						<div class="section-method">
	<a name="//api/name/addItem:" title="addItem:"></a>
	<h3 class="subsubtitle method-title">addItem:</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Adds an item to the repository.</p>
	</div>		
	
	
	<div class="method-subsection method-declaration"><code>- (BOOL)addItem:(id&lt;BBRepositoryItem&gt;)<em>item</em></code></div>
	
	
	<div class="method-subsection arguments-section parameters">
		<h4 class="method-subtitle parameter-title">Parameters</h4>
		
		<dl class="argument-def parameter-def">
			<dt><em>item</em></dt>
			<dd><p>Item to add to the repository.</p></dd>
		</dl>
		
	</div>
	
	
	
	<div class="method-subsection return">
		<h4 class="method-subtitle parameter-title">Return Value</h4>
		<p><code>YES</code> if the item was successfully added to the repository, <code>NO</code> otherwise. Note that by adding an object to
the repository there is no guarantee that the object will be persisted to disk. You must explicitly call <a href="#//api/name/flush"><code>flush</code></a> when
deemed appropriate in order to persist this item.</p>
	</div>
	
	
	
	
	
	<div class="method-subsection discussion-section">
		<h4 class="method-subtitle">Discussion</h4>
		<p>Subclasses should override this method and change its input type to help guarantee type safety.</p>
	</div>
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">BBRepository.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/allItems" title="allItems"></a>
	<h3 class="subsubtitle method-title">allItems</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Returns a snapshot of all the items present in the repository at the time of calling of this method.</p>
	</div>		
	
	
	<div class="method-subsection method-declaration"><code>- (NSArray *)allItems</code></div>
	
	
	
	
	<div class="method-subsection return">
		<h4 class="method-subtitle parameter-title">Return Value</h4>
		<p>The current repository items.</p>
	</div>
	
	
	
	
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">BBRepository.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/baseStoragePath" title="baseStoragePath"></a>
	<h3 class="subsubtitle method-title">baseStoragePath</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Returns the base storage path.</p>
	</div>		
	
	
	<div class="method-subsection method-declaration"><code>- (NSString *)baseStoragePath</code></div>
	
	
	
	
	<div class="method-subsection return">
		<h4 class="method-subtitle parameter-title">Return Value</h4>
		<p>The base storage path for this repository.</p>
	</div>
	
	
	
	
	
	<div class="method-subsection discussion-section">
		<h4 class="method-subtitle">Discussion</h4>
		<p>The index file will be stored to this directory. By default, this returns the first path under the user&rsquo;s
<code>NSApplicationSupportDirectory</code>.</p>

<p>Subclasses should override this method and return another path if (for instance, caches should use <code>NSCachesDirectory</code>.
This path can also be used to store additional files managed by this repository.</p>
	</div>
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">BBRepository.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/convertItemToDictionary:" title="convertItemToDictionary:"></a>
	<h3 class="subsubtitle method-title">convertItemToDictionary:</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Convert an item to its <code>NSDictionary</code> representation, so that it can be stored to a binary property list (plist).</p>
	</div>		
	
	
	<div class="method-subsection method-declaration"><code>- (NSDictionary *)convertItemToDictionary:(id&lt;BBRepositoryItem&gt;)<em>item</em></code></div>
	
	
	<div class="method-subsection arguments-section parameters">
		<h4 class="method-subtitle parameter-title">Parameters</h4>
		
		<dl class="argument-def parameter-def">
			<dt><em>item</em></dt>
			<dd><p>The item to convert.</p></dd>
		</dl>
		
	</div>
	
	
	
	<div class="method-subsection return">
		<h4 class="method-subtitle parameter-title">Return Value</h4>
		<p>the <code>NSDictionary</code> representation of the item.</p>
	</div>
	
	
	
	
	
	<div class="method-subsection discussion-section">
		<h4 class="method-subtitle">Discussion</h4>
		<p>If this method returns <code>nil</code>, the item cannot be converted to a <code>NSDictionary</code> representation and thus it will not be
serialized.</p>

<p>This method may not need to be overridden, as the default implementation will test the whether the item responds to the
selector <code>convertToDictionary</code> and call it if it does.</p>

<p>Beware that if the item does not respond to <code>convertToDictionary</code> selector, this method will return <code>nil</code> and cause
the item <strong>not to be serialized</strong>.</p>

<p>If you subclass this method, make sure you change the input parameter type, in order to add type safety.</p>
	</div>
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">BBRepository.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/createItemFromDictionary:" title="createItemFromDictionary:"></a>
	<h3 class="subsubtitle method-title">createItemFromDictionary:</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Creates an instance of a class that implements the <a href="../Protocols/BBRepositoryItem.html"><code>BBRepositoryItem</code></a> protocol from an <code>NSDictionary</code> containing the
serialized version of the object.</p>
	</div>		
	
	
	<div class="method-subsection method-declaration"><code>- (id&lt;BBRepositoryItem&gt;)createItemFromDictionary:(NSDictionary *)<em>dictionary</em></code></div>
	
	
	<div class="method-subsection arguments-section parameters">
		<h4 class="method-subtitle parameter-title">Parameters</h4>
		
		<dl class="argument-def parameter-def">
			<dt><em>dictionary</em></dt>
			<dd><p><code>NSDictionary</code> instance that contains the serialized fields for an object.</p></dd>
		</dl>
		
	</div>
	
	
	
	<div class="method-subsection return">
		<h4 class="method-subtitle parameter-title">Return Value</h4>
		<p>A deserialized instance of a class that implements the <a href="../Protocols/BBRepositoryItem.html"><code>BBRepositoryItem</code></a> protocol.</p>
	</div>
	
	
	
	
	
	<div class="method-subsection discussion-section">
		<h4 class="method-subtitle">Discussion</h4>
		<p>This method <strong>must</strong> be overridden by subclasses and is the place to call the item&rsquo;s class
<code>initWithRepositoryDictionary:</code> method.</p>

<pre><code> // assuming CustomItem implements BBRepositoryItem...
 - (CustomItem*)createItemFromDictionary:(NSDictionary*)dictionary
 {
     return [CustomItem alloc] initWithRepositoryDictionary:dictionary];
 }
</code></pre>

<p>When subclassing, make sure you change the return type, to improve type safety.</p>
	</div>
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">BBRepository.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/destroy" title="destroy"></a>
	<h3 class="subsubtitle method-title">destroy</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Completely purges all data managed by this repository.</p>
	</div>		
	
	
	<div class="method-subsection method-declaration"><code>- (BOOL)destroy</code></div>
	
	
	
	
	<div class="method-subsection return">
		<h4 class="method-subtitle parameter-title">Return Value</h4>
		<p><code>YES</code> if destruction was successful, <code>NO</code> otherwise. When this method returns <code>NO</code> the app probably needs to
be reinstalled.</p>
	</div>
	
	
	
	
	
	<div class="method-subsection discussion-section">
		<h4 class="method-subtitle">Discussion</h4>
		<p>This method will delete index file on disk and entries in memory.</p>
	</div>
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">BBRepository.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/flush" title="flush"></a>
	<h3 class="subsubtitle method-title">flush</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Serialize and <a href="#//api/name/flush">flush</a> all entries in memory to disk.</p>
	</div>		
	
	
	<div class="method-subsection method-declaration"><code>- (BOOL)flush</code></div>
	
	
	
	
	<div class="method-subsection return">
		<h4 class="method-subtitle parameter-title">Return Value</h4>
		<p><code>YES</code> if entries were successfully flushed to disk, <code>NO</code> otherwise.</p>
	</div>
	
	
	
	
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">BBRepository.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/hasItemWithKey:" title="hasItemWithKey:"></a>
	<h3 class="subsubtitle method-title">hasItemWithKey:</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Test whether the repository contains an item with the given key.</p>
	</div>		
	
	
	<div class="method-subsection method-declaration"><code>- (BOOL)hasItemWithKey:(NSString *)<em>key</em></code></div>
	
	
	<div class="method-subsection arguments-section parameters">
		<h4 class="method-subtitle parameter-title">Parameters</h4>
		
		<dl class="argument-def parameter-def">
			<dt><em>key</em></dt>
			<dd><p>The key to test.</p></dd>
		</dl>
		
	</div>
	
	
	
	<div class="method-subsection return">
		<h4 class="method-subtitle parameter-title">Return Value</h4>
		<p><code>YES</code> if an item with the given key is present in this repository, <code>NO</code> otherwise.</p>
	</div>
	
	
	
	
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">BBRepository.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/init" title="init"></a>
	<h3 class="subsubtitle method-title">init</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Creates a new repository, passing &ldquo;Default&rdquo; as the <a href="#//api/name/identifier">identifier</a>.</p>
	</div>		
	
	
	<div class="method-subsection method-declaration"><code>- (id)init</code></div>
	
	
	
	
	<div class="method-subsection return">
		<h4 class="method-subtitle parameter-title">Return Value</h4>
		<p>A newly initialized <a href="BBRepository.html"><code>BBRepository</code></a> instance.</p>
	</div>
	
	
	
	
	
	
	
	
	
	<div class="method-subsection see-also-section">
		<h4 class="method-subtitle">See Also</h4>
		<ul>
			
			<li><code><p><a href="#//api/name/initWithIdentifier:">&ndash; initWithIdentifier:</a></p></code></li>
			
		</ul>
	</div>
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">BBRepository.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/initWithIdentifier:" title="initWithIdentifier:"></a>
	<h3 class="subsubtitle method-title">initWithIdentifier:</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Creates a new repository with a given <a href="#//api/name/identifier">identifier</a>.</p>
	</div>		
	
	
	<div class="method-subsection method-declaration"><code>- (id)initWithIdentifier:(NSString *)<em>identifier</em></code></div>
	
	
	<div class="method-subsection arguments-section parameters">
		<h4 class="method-subtitle parameter-title">Parameters</h4>
		
		<dl class="argument-def parameter-def">
			<dt><em>identifier</em></dt>
			<dd><p>The <a href="#//api/name/identifier">identifier</a> for this repository.</p></dd>
		</dl>
		
	</div>
	
	
	
	<div class="method-subsection return">
		<h4 class="method-subtitle parameter-title">Return Value</h4>
		<p>A newly initialized <a href="BBRepository.html"><code>BBRepository</code></a> instance.</p>
	</div>
	
	
	
	
	
	
	
	
	
	<div class="method-subsection see-also-section">
		<h4 class="method-subtitle">See Also</h4>
		<ul>
			
			<li><code><p><a href="#//api/name/identifier">@property identifier</a></p></code></li>
			
		</ul>
	</div>
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">BBRepository.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/itemCount" title="itemCount"></a>
	<h3 class="subsubtitle method-title">itemCount</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Number of managed entries (in-memory) by this repository.</p>
	</div>		
	
	
	<div class="method-subsection method-declaration"><code>- (NSUInteger)itemCount</code></div>
	
	
	
	
	<div class="method-subsection return">
		<h4 class="method-subtitle parameter-title">Return Value</h4>
		<p>Number of entries.</p>
	</div>
	
	
	
	
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">BBRepository.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/itemForKey:" title="itemForKey:"></a>
	<h3 class="subsubtitle method-title">itemForKey:</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Retrieve an item based on its index key</p>
	</div>		
	
	
	<div class="method-subsection method-declaration"><code>- (id)itemForKey:(NSString *)<em>key</em></code></div>
	
	
	<div class="method-subsection arguments-section parameters">
		<h4 class="method-subtitle parameter-title">Parameters</h4>
		
		<dl class="argument-def parameter-def">
			<dt><em>key</em></dt>
			<dd><p>The key of the item to retrieve.</p></dd>
		</dl>
		
	</div>
	
	
	
	<div class="method-subsection return">
		<h4 class="method-subtitle parameter-title">Return Value</h4>
		<p>The item for the given key, if there is one.</p>
	</div>
	
	
	
	
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">BBRepository.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/reload" title="reload"></a>
	<h3 class="subsubtitle method-title">reload</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Reload data from disk</p>
	</div>		
	
	
	<div class="method-subsection method-declaration"><code>- (BOOL)reload</code></div>
	
	
	
	
	<div class="method-subsection return">
		<h4 class="method-subtitle parameter-title">Return Value</h4>
		<p><code>YES</code> if entries were successfully reloaded from disk, <code>NO</code> otherwise.</p>
	</div>
	
	
	
	
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">BBRepository.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/reloadComplete" title="reloadComplete"></a>
	<h3 class="subsubtitle method-title">reloadComplete</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Called after <a href="#//api/name/reload">reload</a> succeeds, right before returning <code>YES</code> on <a href="#//api/name/reload"><code>reload</code></a>.</p>
	</div>		
	
	
	<div class="method-subsection method-declaration"><code>- (void)reloadComplete</code></div>
	
	
	
	
	
	
	
	
	<div class="method-subsection discussion-section">
		<h4 class="method-subtitle">Discussion</h4>
		<p>This method is meant to be overridden by subclasses (no need to call <code>super</code> since it&rsquo;s a no-op implementation) that
need to perform some post <a href="#//api/name/reload">reload</a> actions.</p>
	</div>
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">BBRepository.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/removeItemWithKey:" title="removeItemWithKey:"></a>
	<h3 class="subsubtitle method-title">removeItemWithKey:</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Removes an item from the repository.</p>
	</div>		
	
	
	<div class="method-subsection method-declaration"><code>- (void)removeItemWithKey:(NSString *)<em>key</em></code></div>
	
	
	<div class="method-subsection arguments-section parameters">
		<h4 class="method-subtitle parameter-title">Parameters</h4>
		
		<dl class="argument-def parameter-def">
			<dt><em>key</em></dt>
			<dd><p>Key for the item to remove from the repository.</p></dd>
		</dl>
		
	</div>
	
	
	
	
	
	
	
	<div class="method-subsection discussion-section">
		<h4 class="method-subtitle">Discussion</h4>
		<p>Subclasses should override this method and change its input type to help guarantee type safety.</p>
	</div>
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">BBRepository.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/repositoryName" title="repositoryName"></a>
	<h3 class="subsubtitle method-title">repositoryName</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Name of the repository, used to generate the target repository directory and index filename.</p>
	</div>		
	
	
	<div class="method-subsection method-declaration"><code>- (NSString *)repositoryName</code></div>
	
	
	
	
	<div class="method-subsection return">
		<h4 class="method-subtitle parameter-title">Return Value</h4>
		<p>The name of the repository.</p>
	</div>
	
	
	
	
	
	<div class="method-subsection discussion-section">
		<h4 class="method-subtitle">Discussion</h4>
		<p>This method returns the a string with the following format:</p>

<pre><code> &lt;repository name&gt;-&lt;identifier&gt;
</code></pre>

<p>That string will be used to build the repository folder:</p>

<pre><code> &lt;base storage path&gt;/&lt;repository name&gt;/
</code></pre>

<p>It will also be used to create the index file:</p>

<pre><code> &lt;base storage path&gt;/&lt;repository name&gt;/&lt;repository name&gt;-&lt;identifier&gt;-Index.plist
</code></pre>

<p>  Subclasses may override this method to provide a different return value.</p>
	</div>
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">BBRepository.h</code><br />
	</div>				
	
	
</div>
						
					</div>
					
					
				</div>
				<div class="main-navigation navigation-bottom">
					<ul>
	<li><a href="../index.html">Index</a></li>
	<li><a href="../hierarchy.html">Hierarchy</a></li>
</ul>
				</div>
				<div id="footer">
					<hr />
					<div class="footer-copyright">
						<p><span class="copyright">&copy; 2012 BiasedBit. All rights reserved. (Last updated: 2012-07-29)</span><br />
						
						<span class="generator">Generated by <a href="http://appledoc.gentlebytes.com">appledoc 2.0.5 (build 737)</a>.</span></p>
						
					</div>
				</div>
			</div>
		</article>
		<script type="text/javascript">
			function jumpToChange()
			{
				window.location.hash = this.options[this.selectedIndex].value;
			}
			
			function toggleTOC()
			{
				var contents = document.getElementById('contents');
				var tocContainer = document.getElementById('tocContainer');
				
				if (this.getAttribute('class') == 'open')
				{
					this.setAttribute('class', '');
					contents.setAttribute('class', '');
					tocContainer.setAttribute('class', '');
					
					window.name = "hideTOC";
				}
				else
				{
					this.setAttribute('class', 'open');
					contents.setAttribute('class', 'isShowingTOC');
					tocContainer.setAttribute('class', 'isShowingTOC');
					
					window.name = "";
				}
				return false;
			}
			
			function toggleTOCEntryChildren(e)
			{
				e.stopPropagation();
				var currentClass = this.getAttribute('class');
				if (currentClass == 'children') {
					this.setAttribute('class', 'children open');
				}
				else if (currentClass == 'children open') {
					this.setAttribute('class', 'children');
				}
				return false;
			}
			
			function tocEntryClick(e)
			{
				e.stopPropagation();
				return true;
			}
			
			function init()
			{
				var selectElement = document.getElementById('jumpTo');
				selectElement.addEventListener('change', jumpToChange, false);
				
				var tocButton = document.getElementById('table_of_contents');
				tocButton.addEventListener('click', toggleTOC, false);
				
				var taskTreeItem = document.getElementById('task_treeitem');
				if (taskTreeItem.getElementsByTagName('li').length > 0)
				{
					taskTreeItem.setAttribute('class', 'children');
					taskTreeItem.firstChild.setAttribute('class', 'disclosure');
				}
				
				var tocList = document.getElementById('toc');
				
				var tocEntries = tocList.getElementsByTagName('li');
				for (var i = 0; i < tocEntries.length; i++) {
					tocEntries[i].addEventListener('click', toggleTOCEntryChildren, false);
				}
				
				var tocLinks = tocList.getElementsByTagName('a');
				for (var i = 0; i < tocLinks.length; i++) {
					tocLinks[i].addEventListener('click', tocEntryClick, false);
				}
				
				if (window.name == "hideTOC") {
					toggleTOC.call(tocButton);
				}
			}
			
			window.onload = init;
		</script>
	</body>
</html>